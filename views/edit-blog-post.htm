<input type="text" name="blog-post-title">
<textarea style="width:100%; height:100%;" name="blog-post-content">

</textarea>
<script>
    var titleField = document.querySelector("[name=blog-post-title]");
    var editorField = document.querySelector("[name=blog-post-content]");
    
    var name = getQueryVariable("name");
    
    if(name) {
        getUrl("_api/get-blog-post.php?name="+name, function(error, res) {
            if(error) {
                return alert("Something went wrong! "+error);
            }
            titleField.setAttribute("value", res.title);
            editorField.innerHTML = res.content;
        });
    }
    else {
        titleField.innerHTML("No name provided");
        editorField.innerHTML = "---";
    }
    
    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
            var pair = vars[i].split('=');
            if (decodeURIComponent(pair[0]) == variable) {
                return decodeURIComponent(pair[1]);
            }
        }
        console.log('Query variable %s not found', variable);
    }
    
    function getUrl(url, callback) {
        var req = new XMLHttpRequest();
        req.open("GET", url);
        req.onreadystatechange = function() {
            try {
                alert(req.responseText);
                var res = JSON.parse(req.responseText);
                if(res.error) {
                    return callback(res.error);
                }
                callback(null, res);
            }
            catch(e) {
                callback(e);
            }
        };
        req.send();
    }
</script>